
f = phi;

test = 2*f - (-k*(k*t^2 - 4))^(1/2);
test = simplify(test);%


E1= (2*a*sin(d*f)^2*exp(-(pi*k*t)/(2*f))*(2*d*t + (2*(cos(d*f)*exp(-(d*k*t)/2) - 1)*(k*t^2 - 1))/k ...
    + (2*t*sin(d*f)*exp(-(d*k*t)/2)*(k*t^2 - 3))/(2*f)))...
    /(k*t^2 - 4) ...
    - a*d*(t*(cos((d*2*f)/2)*exp(-(d*k*t)/2) - 1) + (k*t^2*sin((d*2*f)/2)*exp(-(d*k*t)/2))/(2*f)) ...
    - (a*(2*d*t + (2*(cos((d*2*f)/2)*exp(-(d*k*t)/2) - 1)*(k*t^2 - 1))/k + (2*t*sin((d*2*f)/2)*exp(-(d*k*t)/2)*(k*t^2 - 3))/(2*f)))/2 ...
    - (a*exp(-(pi*k*t)/(2*f))*(4*k*sin((d*2*f)/2)^2 + k*(cos((d*2*f)/2)^2 ...
    + sin((d*2*f)/2)^2)*(k*t^2 - 4))*(2*d*t + (2*(cos((d*2*f)/2)*exp(-(d*k*t)/2) - 1)*(k*t^2 - 1))/k ...
    + (2*t*sin((d*2*f)/2)*exp(-(d*k*t)/2)*(k*t^2 - 3))/(2*f)))...
    /(2*k*(k*t^2 - 4)) ...
    + (a*d*exp(-(d*k*t)/2)*(cosh((d*2i*f)/2)*2*f + k*t*sin((d*2*f)/2))*(t + t*cos((d*2*f)/2)*exp(-(k*t*(2*pi - d*(-k*(k*t^2 - 4))^(1/2)))/(2*(-k*(k*t^2 - 4))^(1/2))) ...
    - (k*t^2*sin((d*(-k*(k*t^2 - 4))^(1/2))/2)*exp(-(k*t*(2*pi - d*(-k*(k*t^2 - 4))^(1/2)))/(2*(-k*(k*t^2 - 4))^(1/2))))/(2*f)))...
    /(2*f) ...
    - (4*a*d*t*sin((d*(-k*(k*t^2 - 4))^(1/2))/2)^2*exp(-(pi*k*t)/(-k*(k*t^2 - 4))^(1/2)))/(k*t^2 - 4);

%result = simplify(E-E1);
k_val = 0.2;
t_val = 0.5*sqrt(4/k_val);
a_val = 2;

-(a*(exp((pi*k*t)/(-k*(k*t^2 - 4))^(1/2)) + 1)*((k^2*t^4)/2 - (3*k*t^2)/2 + (3*k^(3/2)*t^2*(4 - k*t^2)^(1/2))/(2*(-k*(k*t^2 - 4))^(1/2)) - (k^(5/2)*t^4*(4 - k*t^2)^(1/2))/(2*(-k*(k*t^2 - 4))^(1/2)) + 1))/(k*(exp((k*t*(pi + 2*asin((k^(1/2)*t)/2)))/(-k*(k*t^2 - 4))^(1/2)) - 2^((k*t*2i)/(-k*(k*t^2 - 4))^(1/2))/((4 - k*t^2)^(1/2) + k^(1/2)*t*1i)^((k*t*2i)/(-k*(k*t^2 - 4))^(1/2))))
 
%d4_inf1 = -a*(exp((pi*k)/sqrt(4*k*t^-2-k^2)) + 1)...
    %/(k*exp(alpha*k*t/f)*(exp(k*t*pi /(2*f)) - 1));
d4_inf1 =  -a*(1/(k*exp(2*asin(sqrt(k)*t/2)/sqrt(4*k^-1*t^-2-1)))+2/(k*exp(2*asin(sqrt(k)*t/2)/sqrt(4*k^-1*t^-2-1))*(exp(pi/sqrt(4*k^-1*t^-2-1))-1)))
d4_inf_val = vpa(subs(d4_inf,[k,t,a],[k_val,t_val,a_val]))
res_val = vpa(subs(d4_inf1-d4_inf,[k,t,a],[k_val,t_val,a_val]))
%temp_val = vpa(subs(2^(k*t*1i/f)/(2*f/k^(1/2) + k^(1/2)*t*1i)^(k*t*i/f),[k,t,a],[k_val,t_val,a_val]))
%result = simplify(d4_inf1 -d4_inf);